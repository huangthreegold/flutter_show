# ğŸš€ å±€åŸŸç½‘è®¿é—®å¯åŠ¨æŒ‡å—

## å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
./start_web_grpc.sh
```

ç­‰å¾…çœ‹åˆ° "æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨" åï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼š
- **å±€åŸŸç½‘è®¿é—®**: `http://192.168.1.143:3000`
- **æœ¬æœºè®¿é—®**: `http://localhost:3000`

---

## æ–¹æ³•äºŒï¼šåˆ†æ­¥å¯åŠ¨ï¼ˆæ›´ç¨³å®šï¼‰

### æ­¥éª¤ 1: å¯åŠ¨ Envoy ä»£ç†ï¼ˆåå°è¿è¡Œï¼‰

```bash
./envoy -c envoy.yaml > /tmp/envoy.log 2>&1 &
```

æ£€æŸ¥æ˜¯å¦æˆåŠŸï¼š
```bash
lsof -i :8080
```

### æ­¥éª¤ 2: å¯åŠ¨ Flutter Webï¼ˆæ”¯æŒå±€åŸŸç½‘è®¿é—®ï¼‰

```bash
flutter run -d web-server --web-port 3000 --web-hostname 0.0.0.0
```

çœ‹åˆ° "Application finished" åï¼Œè®¿é—®ï¼š
- **å±€åŸŸç½‘**: `http://192.168.1.143:3000`
- **æœ¬æœº**: `http://localhost:3000`

---

## æ–¹æ³•ä¸‰ï¼šChrome è°ƒè¯•æ¨¡å¼ï¼ˆå¼€å‘æ¨èï¼‰

```bash
flutter run -d chrome
```

> æ³¨æ„ï¼šChrome æ¨¡å¼åªèƒ½æœ¬æœºè®¿é—®ï¼Œä¸èƒ½ä»å…¶ä»–ç”µè„‘è®¿é—®

---

## ğŸ“± åœ¨å…¶ä»–è®¾å¤‡è®¿é—®

ç¡®ä¿ï¼š
1. âœ… è®¾å¤‡è¿æ¥åˆ°åŒä¸€ WiFi
2. âœ… æœåŠ¡å™¨ IPï¼š`192.168.1.143`
3. âœ… è®¿é—®åœ°å€ï¼š`http://192.168.1.143:3000`

å¯ä»¥åœ¨ä»¥ä¸‹è®¾å¤‡è®¿é—®ï¼š
- Windows/Mac/Linux ç”µè„‘æµè§ˆå™¨
- æ‰‹æœºæµè§ˆå™¨ï¼ˆiOS Safari / Android Chromeï¼‰
- å¹³æ¿æµè§ˆå™¨

---

## ğŸ” æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥æ‰€æœ‰ç«¯å£
lsof -i :50051 -i :8080 -i :3000

# æˆ–ä½¿ç”¨ netstat
netstat -tuln | grep -E "50051|8080|3000"
```

é¢„æœŸç»“æœï¼š
- âœ… `*:50051` - gRPC æœåŠ¡å™¨
- âœ… `*:8080` - Envoy ä»£ç†
- âœ… `*:3000` - Flutter Web

---

## ğŸ›‘ åœæ­¢æœåŠ¡

### åœæ­¢ Flutter Web
åœ¨è¿è¡Œ Flutter çš„ç»ˆç«¯æŒ‰ `q` æˆ– `Ctrl+C`

### åœæ­¢ Envoy
```bash
pkill envoy
```

### åœæ­¢æ‰€æœ‰
```bash
pkill envoy
pkill -f "flutter run"
pkill -f "site_health"
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000

# ç»“æŸè¿›ç¨‹
kill -9 <PID>
```

### é—®é¢˜2: å…¶ä»–ç”µè„‘æ— æ³•è®¿é—®

æ£€æŸ¥é˜²ç«å¢™ï¼š
```bash
# Ubuntu/Debian
sudo ufw allow 3000/tcp
sudo ufw allow 8080/tcp
sudo ufw allow 50051/tcp

# æˆ–ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•
sudo ufw disable
```

### é—®é¢˜3: gRPC è¿æ¥å¤±è´¥

ç¡®è®¤é…ç½®æ–‡ä»¶ `lib/grpc_config.dart`ï¼š
```dart
static const String host = '192.168.1.143';
```

---

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

**æ—¥å¸¸å¼€å‘ï¼ˆæœ¬æœºï¼‰ï¼š**
```bash
flutter run -d chrome
```

**æµ‹è¯•å±€åŸŸç½‘è®¿é—®ï¼š**
```bash
# ç»ˆç«¯1: å¯åŠ¨ Envoy
./envoy -c envoy.yaml &

# ç»ˆç«¯2: å¯åŠ¨ Flutter Web
flutter run -d web-server --web-port 3000 --web-hostname 0.0.0.0
```

**ç”Ÿäº§éƒ¨ç½²ï¼š**
ä½¿ç”¨ `flutter build web` æ„å»ºé™æ€æ–‡ä»¶ï¼Œéƒ¨ç½²åˆ°çœŸå®æœåŠ¡å™¨ã€‚
